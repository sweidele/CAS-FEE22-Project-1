<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <title>Todo App</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto&family=Fascinate&display=swap&family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../styles/index.css" />

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.3/handlebars.min.js"
      integrity="sha256-/PJBs6QWvXijOFIX04kZpLb6ZtSQckdOIavLWKKOgXU="
      crossorigin="anonymous"
      defer
    ></script>

    <script id="todoItemsTemplate" type="text/x-handlebars-template">
      <ul>
        {{#each this}}
        <li class="todo-item-grid">
          <p class="todo-item-duedate todo-item">{{formatDate dueDate}}</p>
          <p class="todo-item-title todo-item">{{title}}</p>
          <div class="todo-item-importance todo-item">
            {{#loop importance}}
              <span class="material-symbols-outlined">electric_bolt</span>
            {{/loop}}
          </div>
          <label class="todo-item-finished todo-item">
            <input type="checkbox" onclick="return false;" {{#if finished}} checked {{/if}}/>
              {{#if finished}}
                <span class="item-row">Completed</span>
              {{else}}
                <span class="item-row">Open</span>
              {{/if}}
          </label>
          <p class="todo-item-description todo-item">{{description}}</p>

          <div class="todo-item-edit todo-item">
            <button data-todo-item-id="{{id}}">Edit</button>
          </div>
          <hr class="todo-item-line todo-item"/>
        </li>
        {{/each}}
      </ul>
    </script>

    <script id="updateTodoTemplate" type="text/x-handlebars-template">
      <form id="updateTodoForm" class="update-todo-container">
        <label class="form-item-column">
          <span class="form-item-row">Titel</span>
          <input name="title" class="form-item-row" value="{{title}}">
        </label>
        <label class="form-item-column">
          <span class="form-item-row">Importance</span>
          <input name="importance" type="number" class="form-item-row" value="{{importance}}">
        </label>
        <label class="form-item-column">
          <span class="form-item-row">Due Date</span>
          <input name="dueDate" type="date" class="form-item-row" value="{{dueDate}}">
        </label>
        <label class="item-column">
          <input name="finished" type="checkbox" class="item-row" {{#if finished}} checked {{/if}}>
          <span class="item-row">Finished</span>
        </label>
        <label class="form-item-column">
          <span class="form-item-row">Description</span>
          <textarea name="description" class="form-item-row" rows="5">{{description}}</textarea>
        </label>
        <div class="update-todo-buttons-container item-column">
          <button class="item-row" data-todo-item-id="{{id}}" data-button-type="update" type="submit">Update</button>
          <button class="item-row" data-todo-item-id="{{id}}" data-button-type="updateOverview" type="submit">Update & Overview</button>
          <button id="overviewButton" class="item-row" data-todo-item-id="{{id}}" type="button">Overview</button>
        </div>
        <input name="creationDate" type="hidden" type="date" value="{{creationDate}}">
      </form>
    </script>
  </head>
  <body>
    <header>
      <nav>
        <ul class="main-nav-container item-column">
          <li class="main-nav-item">
            <button id="createItemButton" class="item-row">Create</button>
          </li>
          <li class="main-nav-item">
            <button id="backButton" class="item-row">Back</button>
          </li>
          <li class="main-nav-item">
            <button id="toogleStyleButton" class="item-row">
              Toogle Style
            </button>
          </li>
        </ul>
      </nav>
    </header>
    <main>
      <nav id="todoListNav">
        <ul class="sub-nav-container item-column">
          <li class="sub-nav-item">
            <button class="item-row sub-nav-button" id="filterTitleButton">
              Name
            </button>
          </li>
          <li class="sub-nav-item">
            <button class="item-row sub-nav-button" id="filterDueDateButton">
              By Due Date
            </button>
          </li>
          <li class="sub-nav-item">
            <button
              class="item-row sub-nav-button"
              id="filterCreationDateButton"
            >
              By Creation Date
            </button>
          </li>
          <li class="sub-nav-item">
            <button class="item-row sub-nav-button" id="filterImportanceButton">
              By Importance
            </button>
          </li>
          <li class="sub-nav-item">
            <button class="item-row sub-nav-button" id="filterCompletedButton">
              Filter Completed
            </button>
          </li>
        </ul>
      </nav>
      <div id="todoListContainer"></div>
      <div id="updateTodoContainer"></div>
    </main>
    <footer>
      <p>&copy; Stephan</p>
    </footer>
    <script src="../scripts/utils/handlebarsHelpers.js" defer></script>
    <script
      src="../scripts/controllers/controller.js"
      type="module"
    ></script>
  </body>
</html>
